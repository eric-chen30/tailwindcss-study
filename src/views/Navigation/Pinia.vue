<template>
  <div class="flex m-6">
    <!-- card1:storeå®ä¾‹ä¸­çš„ count && doubleCount -->
    <div class="flex-1 card w-96 bg-primary text-primary-content m-4 shadow-xl">
      <div class="card-body italic text-amber-400 font-black">
        <h2 class="card-title">ğŸPinia Storeçš„state</h2>
        <div class="font-bold text-lg italic text-amber-400 p-2">
          Current Count: {{ counterStore.count }}
        </div>
        <div class="font-bold text-lg italic text-red-300 p-2">
          Current doubleCount: {{ counterStore.doubleCount }}
        </div>
      </div>
    </div>
    <!-- card2 -->
    <div class="flex-1 card w-96 bg-primary text-primary-content m-4 shadow-xl">
      <div class="card-body italic text-amber-400 font-black text-lg">
        <h2 class="card-title">ğŸPiniaä¸Vuexå¯¹æ¯”</h2>
        <p>1.æ›´ç®€å•çš„API</p>
        <p>2.ä¸ç»„åˆå¼å†™æ³•é£æ ¼æ›´æ¥è¿‘çš„API</p>
        <p>3.æ­é…TSä½¿ç”¨å¯ä»¥è¿›è¡Œå¯é çš„ç±»å‹æ¨æ–­[Vuex 3.x åªé€‚é… Vue 2ï¼Œè€Œ Vuex 4.x æ˜¯é€‚é… Vue 3 çš„</p>
      </div>
    </div>
    <!-- card3 -->
    <div class="flex-1 card w-96 bg-primary text-primary-content m-4 shadow-xl text-lg">
      <div class="card-body italic text-red-300 font-black">
        <h2 class="card-title">ğŸPiniaè¯´æ˜</h2>
        <p>â‘ ã€piniaä¸­ mutationå·²è¢«å¼ƒç”¨ã€å› ä¸ºå®ƒç»å¸¸è¢«è®¤ä¸ºæ˜¯å†—ä½™çš„</p>
        <p>â‘¡ã€ä¸éœ€è¦åŠ¨æ€æ·»åŠ  Store å®ƒä»¬é»˜è®¤æ˜¯åŠ¨æ€çš„</p>
        <p>â‘¢ã€ä¸éœ€è¦åˆ›å»ºå¤æ‚çš„åŒ…è£…å™¨æ¥æ”¯æŒTSï¼Œä¸€åˆ‡éƒ½æ˜¯å¯æ ‡æ³¨ç±»å‹ @tyle</p>
        <p>â‘£ã€æ²¡æœ‰è¿‡å¤šé­”æ³•å­—ç¬¦ä¸²ï¼ˆä¸ä»£ç å½¢æˆå¼ºè€¦åˆçš„ä¸€äº›ç‰¹å®šå­—ç¬¦ä¸²ï¼‰å‡ºç°ï¼Œåº”è¯¥å°½é‡æ¶ˆé™¤é­”æ³•å­—ç¬¦ä¸²ï¼Œç”±å«ä¹‰æ¸…æ™°çš„å˜é‡ä»£æ›¿</p>
      </div>
    </div>
  </div>
  <!-- Hero -->
  <div class="hero min-h-screen">
    <div class="hero-overlay bg-opacity-60"></div>
    <div class="hero-content text-center text-neutral-content">
      <div class="font-bold text-blue-300 text-lg">
        <h1 class="mb-5 text-5xl font-bold text-yellow-400">Hello Pinia!!!ğŸ</h1>
        <h2 class="text-2xl font-bold text-red-300">Stateæ“ä½œ</h2>
        <p class="mt-5 text-left">1.è®¿é—® stateï¼Œé»˜è®¤å¯ä»¥é€šè¿‡ storeå®ä¾‹ ç›´æ¥å¯¹ state è¿›è¡Œè¯»å†™</p>
        <p class="mt-5 text-left">2.é‡ç½® stateï¼Œé€šè¿‡è°ƒç”¨ storeå®ä¾‹ çš„ $reset() æ–¹æ³•å°† state é‡ç½®ä¸ºåˆå§‹å€¼</p>
        <p class="mt-5 text-left">3.å˜æ›´ stateï¼Œé™¤äº†ä½¿ç”¨ store.count++ ç›´æ¥æ”¹å˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ store.$patch({ count: store.count + 1 })</p>
        <p class="mt-5 text-left">4.æ›¿æ¢ stateï¼Œä¸èƒ½å®Œå…¨æ›¿æ¢æ‰storeçš„stateï¼Œé‚£æ ·ä¼šç ´åå“åº”æ€§ï¼Œä½†æ˜¯å¯ä»¥patchå®ƒï¼šstore.$patch({ count: 24 })</p>
        <p class="mt-5 text-left">5.è®¢é˜… stateï¼ŒcounterStore.$subscribe</p>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
// å¼•å…¥Store
import { useCounterStore, useTodos } from '../../stores/counter'
import { storeToRefs } from 'pinia';

// 1.storeå®ä¾‹åŒ–å¯¹è±¡æ¥æ”¶è¿”å›
const counterStore = useCounterStore() // Proxyå¯¹è±¡

// 2.å¯ä»¥é€šè¿‡ç»“æ„è·å–storeçš„æ‰€æœ‰è¿”å›å€¼, ä½¿ç”¨ storeToRefs() ç¡®ä¿ä»storeä¸­æå–å±æ€§çš„æ—¶å€™ä¿è¯å…¶å“åº”æ€§
const { count, doubleCount} = storeToRefs(counterStore)
const { increment } = counterStore
console.log(count, doubleCount, increment)  // return [RefImpl ComputedRefImpl  function]

// å…·ä½“æ“ä½œ
counterStore.count++
counterStore.$patch({ count: counterStore.count + 1 })
counterStore.increment()

const todos = useTodos()
console.log(todos)
</script>

<style lang="scss" scoped></style>
